<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMARTAQNET-STATIONARY: esp32-stationary/esp32-stationary.ino Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="monogram.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="monogram.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMARTAQNET-STATIONARY
   </div>
   <div id="projectbrief">Smart Air Quality Network Crowdsensor Firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('esp32-stationary_8ino_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">esp32-stationary.ino</div>  </div>
</div><!--header-->
<div class="contents">
<a href="esp32-stationary_8ino.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="main_8h.html">main.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/**************************************************************************/</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/**************************************************************************/</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="esp32-stationary_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">   23</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="esp32-stationary_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a>() </div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  pinMode(<a class="code" href="main_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a>, OUTPUT);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  digitalWrite(<a class="code" href="main_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a>,HIGH);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment">// make serial monitor printing available</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  Serial.begin(115200);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  digitalWrite(<a class="code" href="main_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a>,LOW);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  delay(100);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  digitalWrite(<a class="code" href="main_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a>,HIGH);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  delay(100);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// print FW version and devmode|release setting over serial</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  Serial.print(<span class="stringliteral">&quot;\nVERSION: Crowdsensor FW &quot;</span>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  Serial.println(<a class="code" href="main_8h.html#aa14dc39d52ab121ceb570f1a265385e0">FIRMWARE_VERSION</a>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<span class="stringliteral">&quot;\nWARNING: YOU ARE RUNNING A DEVELOPMENT VERSION OF THIS FIRMWARE!!!\n&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// setup display</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.begin();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.setFont(u8g2_font_pxplusibmcga_8f);<span class="comment">// choose a suitable font</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.setContrast(255);<span class="comment">//Test Contrasts</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">//Test Monograms of KIT and TECO</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  delay(1000);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawXBMP(0, 0, 128, 64, <a class="code" href="display_8h.html#a90f337b111dcfc6f8ff751f5b6a876ee">kit</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  delay(1000);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawXBMP(0, 0, 128, 64, <a class="code" href="display_8h.html#a7dbca79a8947bbade5fff48395c91940">teco</a>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  delay(1000);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0,7,(<span class="stringliteral">&quot;FW: &quot;</span>+ String(<a class="code" href="main_8h.html#aa14dc39d52ab121ceb570f1a265385e0">FIRMWARE_VERSION</a>)).c_str());<span class="comment">//2nd Parameter indicates lines i.e. 7=Line1, 15=Line2, 23=Line3, 31=Line4, 39=Line5, 47=Line6, 55=Line7, 63=Line8</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  </div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer(); </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">//update global variables for location, license and firmware</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="main_8h.html#a5fa85ffee34300f181ee595ca35caac9">abovenn</a> = 0;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="main_8h.html#abdc4960daecc2ccc289d9a50f11ccb47">abovennEstimated</a> = <a class="code" href="main_8h.html#a5fa85ffee34300f181ee595ca35caac9">abovenn</a>+NAN;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="main_8h.html#a6f56f37a7d93ec2851a5d9bc46ae4d34">device_Serial</a> = <a class="code" href="main_8h.html#a6b8024ee3deccc9201e4151ec55efefb">getChipId</a>();</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="main_8h.html#ad9e643bc6bd5a62b9b5011cf1c93629e">latitude</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;latitude&quot;</span>).toFloat();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="main_8h.html#a006303577d6adb772761727538b74f80">longitude</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;longitude&quot;</span>).toFloat();</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="main_8h.html#ac0c97362dcfdb40676d7f1b48843aa73">SDS011_Serial</a> = String(<a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;sds011id&quot;</span>));</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="main_8h.html#a5e122034cdfb5584cc1ee2b30068327c">humanReadableLocation</a> = String(<a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;address&quot;</span>));</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> = String(<a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;rht_sensor&quot;</span>));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="main_8h.html#ac34c6d6c5015a01d6aba05368fd9fdb7">license_type</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;data_license&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="main_8h.html#ac34c6d6c5015a01d6aba05368fd9fdb7">license_type</a> == <span class="stringliteral">&quot;&quot;</span>)) </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="main_8h.html#ab858f3b72becb912c937938bb7432cef">license_owner</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;data_owner&quot;</span>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="main_8h.html#a5fcc3dc147772d5725cd4a6956a71c62">license_url</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;data_url&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[Setup] Building license object: &quot;</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#ac34c6d6c5015a01d6aba05368fd9fdb7">license_type</a> + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="main_8h.html#ab858f3b72becb912c937938bb7432cef">license_owner</a> + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="main_8h.html#a5fcc3dc147772d5725cd4a6956a71c62">license_url</a>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    </div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">//fetch statistics</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="main_8h.html#a4011da054bc45bbb390af503eeed217e">oldErrCode</a> = <a class="code" href="nvs__storage_8h.html#acea24fbda5227d3c2c200578d4ea739c">get_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;warning&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;tom&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a> = <a class="code" href="nvs__storage_8h.html#acea24fbda5227d3c2c200578d4ea739c">get_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;tObservation&quot;</span>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="main_8h.html#aca788da1bb94e00641b6b0c009cbe0cf">nObservations</a> = <a class="code" href="nvs__storage_8h.html#acea24fbda5227d3c2c200578d4ea739c">get_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;nObservation&quot;</span>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="main_8h.html#ae2c827b20e0e0b655e7c940bf586494e">resetCounter</a> = <a class="code" href="nvs__storage_8h.html#acea24fbda5227d3c2c200578d4ea739c">get_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;rCounter&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="main_8h.html#ae2c827b20e0e0b655e7c940bf586494e">resetCounter</a>++;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="nvs__storage_8h.html#a6760d47e1d13db30fe5eaa2d0b22e6f6">set_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;rCounter&quot;</span>,<a class="code" href="main_8h.html#ae2c827b20e0e0b655e7c940bf586494e">resetCounter</a>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  delay(1000);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  </div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">//  messages on display</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0,63, (<span class="stringliteral">&quot;ID:&quot;</span>+<a class="code" href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a>).c_str());</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="sensor_8h.html#ac4a52bac518b8678882cf3be09d1148b">sds</a>.begin(&amp;<a class="code" href="sensor_8h.html#a8f7824c0f2a3aa7e9bac94eac190fa7e">SDS_SERIAL</a>, <a class="code" href="sensor_8h.html#a7130f8006502cdaa31094baa3f4dd3fa">SDS011_TXD</a>, <a class="code" href="sensor_8h.html#ad2b404eb4de525cef31b8413f5d14b13">SDS011_RXD</a>);  <span class="comment">// initialize SDS011 sensor</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<span class="stringliteral">&quot;[Setup] Initializing temperature sensor &quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// start bme280 if chosen in webinterface</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;BME280&quot;</span>)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    </div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[Setup] BME280... &quot;</span>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">bool</span> wireStatus = Wire1.begin(<a class="code" href="sensor_8h.html#ad9e594e426bce833af06dea308dbbf9a">BME_SDA</a>, <a class="code" href="sensor_8h.html#a5db75d8e5f3deda546603b949c520446">BME_SCL</a>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> (!wireStatus) Serial.print(<span class="stringliteral">&quot;Wire1 failed to init&quot;</span>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="main_8h.html#ad9a078f7f5a00549c6d662079e98f9af">bmeAddress</a> = <a class="code" href="sensor_8h.html#a9f6149e98e70e1d5be5f0f33921cb7d7">BME_ADDR</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> = <a class="code" href="sensor_8h.html#a2871708605796e3f6cfa9cd9328daff3">bme</a>.begin(<a class="code" href="main_8h.html#ad9a078f7f5a00549c6d662079e98f9af">bmeAddress</a>, &amp;Wire1);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    </div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot; done: &quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// start dht22 if chosen in webinterface</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;DHT22&quot;</span>)</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[Setup] DHT22... &quot;</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="sensor_8h.html#a81137dc3df575cf0e1b5eca255bca279">dht</a>.begin(); <span class="comment">// initialse DHT22</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<span class="stringliteral">&quot; done. &quot;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    </div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.title = <span class="stringliteral">&quot;TECO Crowdsensor&quot;</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.homeUri = <span class="stringliteral">&quot;/_ac&quot;</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.bootUri = AC_ONBOOTURI_HOME;<span class="comment">//AC_ONBOOTURI_ROOT;//;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">//Config.autoReconnect = true; //connect to the previously reconfigured wifi even after WiFi disconnection whether manually/automatically</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// end sending AP after timeout, go into loop</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.portalTimeout = <a class="code" href="main_8h.html#a8a1756fdd61bca61d188ce01ece876b9">APMODE_REBOOT_TIMEOUT</a>; </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.boundaryOffset = <a class="code" href="main_8h.html#a953ca2c42ce0015ef8c2965e3b395100">CREDENTIAL_OFFSET</a>; </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// use last 6 digits of mac address for ssid (or apid)</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.apid = <a class="code" href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a>.c_str();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.apip = IPAddress(192,168,244,1);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.gateway = IPAddress(192,168,244,1);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>.psk = <span class="stringliteral">&quot;12345678&quot;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a>.config(<a class="code" href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">//add custom pages to autoconnect menu</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="main_8h.html#ac1cd281996f2d93f7b23cfcc2934edb5">cfgSensorPageAux</a>[<span class="stringliteral">&quot;cfgtitle&quot;</span>].value = <span class="stringliteral">&quot;&lt;h1&gt;Crowdsensor Konfiguration Firmware: &quot;</span> + String(<a class="code" href="main_8h.html#aa14dc39d52ab121ceb570f1a265385e0">FIRMWARE_VERSION</a>) + <span class="stringliteral">&quot;&lt;/h1&gt;&quot;</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a>.join({<a class="code" href="main_8h.html#ac1cd281996f2d93f7b23cfcc2934edb5">cfgSensorPageAux</a>,<a class="code" href="main_8h.html#a8cef1e025c75ebbda144d09f86d00786">cfgUpdatePageAux</a>});</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// Load values from flash for AutoConnect pages /</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a>.on(<span class="stringliteral">&quot;/&quot;</span>, <a class="code" href="main_8h.html#ad9a1e86fe8a8ccdeddbd435307dc8b9c">handleRoot</a>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// handle the page /config</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a>.on(<span class="stringliteral">&quot;/config&quot;</span>, <a class="code" href="main_8h.html#a26b99cccf6c7e87054577b293e709733">handleConfig</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// handle the page /dummy</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a>.on(<span class="stringliteral">&quot;/dummy&quot;</span>, <a class="code" href="main_8h.html#af8a025eb9635063f1b8c74904e2984e6">handleDummy</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a>.on(<span class="stringliteral">&quot;/dummyResult&quot;</span>, <a class="code" href="main_8h.html#adf3bfae0fe6a4992264f5b8f0d44432f">handleDummyResult</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a>.on(<span class="stringliteral">&quot;/otaUpdate&quot;</span>, HTTP_GET, <a class="code" href="main_8h.html#adb1e5699d1d537b00a661d58f303b8c0">otaUpdateHandler</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">//handling uploading firmware file </span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a>.on(<span class="stringliteral">&quot;/update&quot;</span>, HTTP_POST, <a class="code" href="main_8h.html#ac18409cbc727fcbb81831d42abceffc2">updateHandler</a> , <a class="code" href="main_8h.html#a27d0e99a6ba203be7c65cd32285853c2">updateHandlerResponse</a> );</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a60fdfcce32e4426394298ad5ae821505">init_state</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/**************************************************************************/</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/**************************************************************************/</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="esp32-stationary_8ino.html#afe461d27b9c48d5921c00d521181f12f">  172</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="esp32-stationary_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a>() </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a>)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a60fdfcce32e4426394298ad5ae821505">init_state</a>:</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="comment">// Start</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a>.<a class="code" href="classmy_auto_connect.html#aeb57ccef1c16394c297a2ea2fd143f52">begin</a>()) </div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        Serial.println(<span class="stringliteral">&quot;WiFi connected: &quot;</span> + WiFi.localIP().toString());</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// clear display</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">// use mdns for host name resolution</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (!MDNS.begin(<a class="code" href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a>.c_str())) { <span class="comment">//http://&lt;chipid&gt;.local</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          Serial.println(<span class="stringliteral">&quot;Error setting up MDNS responder!&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 3;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 3);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        Serial.println(<span class="stringliteral">&quot;mDNS responder started!&quot;</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a4a74679696693029b3d08dddaa209237">check_first_sync</a>;       </div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      }  </div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a4a74679696693029b3d08dddaa209237">check_first_sync</a>:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (WiFi.status() == WL_CONNECTED) </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 7, <span class="stringliteral">&quot;WARTE AUF &quot;</span>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 15, <span class="stringliteral">&quot;ZEIT-SYNC&quot;</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">//added from ezTime library to see whether it affects reboot issue.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        setInterval(21);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  </div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        Serial.println(<span class="stringliteral">&quot;wait for network time sync start&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// update time from network</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// true if update was successful</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a> = waitForSync(<a class="code" href="main_8h.html#ad8124687637087b9096f96b838f93400">NTP_TIMEOUT_WAIT</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a>)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 4);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          Serial.println(<span class="stringliteral">&quot;got network time&quot;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 4;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          Serial.println(<span class="stringliteral">&quot;sync network timeout&quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a0ad2ed0873d73a0fde4a2d84a5a9c13d">idle_state</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a0ad2ed0873d73a0fde4a2d84a5a9c13d">idle_state</a>:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="comment">//reboot daily at specific time</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a> &amp;&amp; <a class="code" href="main_8h.html#a18bdfe88e9f5895863740df7ad801109">ENABLE_DAILY_REBOOT</a>)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="main_8h.html#a58acc281c69407e3fff9fd37ebb230c1">getHourMinute</a>() == <a class="code" href="main_8h.html#a423126ae538bf9e83239e46e46cf1df9">TIMETOREBOOT</a>) &amp;&amp; (millis() &gt; 60000))</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="comment">//if ((UTC.dateTime(&quot;i&quot;).toInt()%30)==0)</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          <a class="code" href="timer__definitions_8h.html#aeb36d30620b2d08c6d267015771abf65">resetModule</a>();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="comment">//check wifi</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">if</span> (WiFi.status() == WL_CONNECTED)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">//moved to lowerd state to fix overlap </span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#ae04c5f63255c64419b7eae91e1c379fe">wifi_found</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((WiFi.status() == WL_CONNECT_FAILED) || (WiFi.status() == WL_CONNECTION_LOST) || (WiFi.status() == WL_DISCONNECTED))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a65679973ed9b853177fec4156b4fe159">wifi_error</a>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#ae04c5f63255c64419b7eae91e1c379fe">wifi_found</a>:</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="comment">// check if time since last measurement is greater than sensor_interval</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(millis() - <a class="code" href="timer__definitions_8h.html#a76bc0a7db1e7b525a8564174240fd93c">previousMillis_sensor</a>) &gt;= <a class="code" href="main_8h.html#a71a7a65f7dd7e8f3ea14942213cd8217">SENSOR_INTERVAL</a>) </div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="timer__definitions_8h.html#a76bc0a7db1e7b525a8564174240fd93c">previousMillis_sensor</a> = millis();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        </div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a43675163416d0468e787ae5e78101d8c">initialised_http</a>) </div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a98e7dcb90b2217dfda04e31e818653ae">check_server_status</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a7dac1877da78ff920a2ab2795ede976d">start_measurement_sds</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;          </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// send to madavi api after send2madavi_intervall milliseconds</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">if</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(millis() - <a class="code" href="timer__definitions_8h.html#a2740fe7e1d5e609878b6c6348c78c97e">previousMillis_send2madavi</a>) &gt;= <a class="code" href="main_8h.html#a6f4b34eadf0db60197dce3a76e0d6632">SEND2MADAVI_INTERVAL</a>)  &amp;&amp; !<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a> &amp;&amp; <a class="code" href="main_8h.html#a18d121e3e45bfea386799ad36fb70b5f">ENABLE_SEND2MADAVI</a>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="timer__definitions_8h.html#a2740fe7e1d5e609878b6c6348c78c97e">previousMillis_send2madavi</a> = millis();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a9a56d8ccddbae8f646bb799874740cb9">send_to_madavi</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="comment">// send single sensor data to luftdaten api after send2luftdaten_intervall milliseconds</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">if</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(millis() - <a class="code" href="timer__definitions_8h.html#a766f70fd244dfc2b331536707e143a58">previousMillis_send2luftdaten</a>) &gt;= <a class="code" href="main_8h.html#a7a63477c73052322ebb3ea6f1bfe7e1d">SEND2LUFTDATEN_INTERVAL</a>) &amp;&amp; !<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a> &amp;&amp; <a class="code" href="main_8h.html#ace6bf58c74189bcd567c1135baaa9505">ENABLE_SEND2LUFTDATEN</a>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="timer__definitions_8h.html#a766f70fd244dfc2b331536707e143a58">previousMillis_send2luftdaten</a> = millis();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a1f42fec1f82e7402efdac5c43b62bd2b">send_to_luftdaten</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a98e7dcb90b2217dfda04e31e818653ae">check_server_status</a>:</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="main_8h.html#a0d3038c949b3590fa1cba35f487583b8">gHttp</a>.begin(String(<a class="code" href="main_8h.html#acbb11c1e34784cf1e3147029f942bfd6">BASE_URL</a>)+<span class="stringliteral">&quot;/Things&quot;</span>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <a class="code" href="main_8h.html#a7b1a43814b8c79bf694be69883c2461a">gHttpCode</a> = <a class="code" href="main_8h.html#a0d3038c949b3590fa1cba35f487583b8">gHttp</a>.GET();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="main_8h.html#a0d3038c949b3590fa1cba35f487583b8">gHttp</a>.end();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      </div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a7b1a43814b8c79bf694be69883c2461a">gHttpCode</a> &lt; 0) </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      { </div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        Serial.println(<span class="stringliteral">&quot;HTTP CODE:&quot;</span>+String(<a class="code" href="main_8h.html#a7b1a43814b8c79bf694be69883c2461a">gHttpCode</a>));</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a7b1a43814b8c79bf694be69883c2461a">gHttpCode</a> != 200) </div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          <a class="code" href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">else</span> </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          <a class="code" href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a>)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 0;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        Serial.println(<span class="stringliteral">&quot;Error on HTTP Server&quot;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a7dac1877da78ff920a2ab2795ede976d">start_measurement_sds</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      {        </div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 0);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        Serial.println(<span class="stringliteral">&quot;Things Server Ready&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="main_8h.html#a43675163416d0468e787ae5e78101d8c">initialised_http</a> = <span class="keyword">true</span>; </div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a7dac1877da78ff920a2ab2795ede976d">start_measurement_sds</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a7dac1877da78ff920a2ab2795ede976d">start_measurement_sds</a>:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// read sensor and store results into global variables pm10, pm25</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// is 1 if failed, and 0 if suceeded</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      </div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a> = <a class="code" href="sensor_8h.html#ac4a52bac518b8678882cf3be09d1148b">sds</a>.read(&amp;<a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>, &amp;<a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      </div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a> = <a class="code" href="main_8h.html#a9a521613f1275c9f7d53f59d48ea1a3a">getIsoTime</a>();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a11ebff5e32b5f74e552c32f4d9fb0b15">start_measurement_bme</a>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a11ebff5e32b5f74e552c32f4d9fb0b15">start_measurement_bme</a>:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">// if bme280 sensor is connected, read values</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;BME280&quot;</span>) </div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a> = <a class="code" href="sensor_8h.html#a2871708605796e3f6cfa9cd9328daff3">bme</a>.readTemperature();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a> = <a class="code" href="sensor_8h.html#a2871708605796e3f6cfa9cd9328daff3">bme</a>.readHumidity();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a> = <a class="code" href="sensor_8h.html#a2871708605796e3f6cfa9cd9328daff3">bme</a>.readPressure();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a> /= 100;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        </div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] temperature: &quot;</span>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] humidity: &quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] pressure: &quot;</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        </div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a> = <a class="code" href="main_8h.html#a9a521613f1275c9f7d53f59d48ea1a3a">getIsoTime</a>();</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (isnan(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>))</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      } </div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;DHT22&quot;</span>) </div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">//    if dht22 is connected, read data</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a> = <a class="code" href="sensor_8h.html#a81137dc3df575cf0e1b5eca255bca279">dht</a>.readTemperature() ;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a> = <a class="code" href="sensor_8h.html#a81137dc3df575cf0e1b5eca255bca279">dht</a>.readHumidity();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a> = <a class="code" href="main_8h.html#a9a521613f1275c9f7d53f59d48ea1a3a">getIsoTime</a>();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        </div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] temperature: &quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] humidity: &quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        </div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (isnan(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>))</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          <a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">//Just to show statistics in case of Development NoN-Release code</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a5f57bb0b8398ff5387d9d949c3e7e5df">start_showing</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      </div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="my_auto_connect_8h.html#a6ce689b93ca03523ef06cf93473494dc">show_QR</a> &amp;&amp; !<a class="code" href="main_8h.html#abbe792bb2cf67584b86443440a194f46">busy</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="comment">//Generate and test a QR Code at location x,y</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="display_8h.html#af7a8a9120f1d9d90783dd6761f1a1f56">generateQRCode</a>(34,2,WiFi.localIP().toString().c_str());</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a609b956a4d0ad00d4d75401bc39d72d5">check_location_data</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="my_auto_connect_8h.html#a6ce689b93ca03523ef06cf93473494dc">show_QR</a>=!<a class="code" href="my_auto_connect_8h.html#a6ce689b93ca03523ef06cf93473494dc">show_QR</a>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a5f57bb0b8398ff5387d9d949c3e7e5df">start_showing</a>:</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 7, <span class="stringliteral">&quot;VERBUNDEN MIT:&quot;</span>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 15, WiFi.SSID().c_str());</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 23, WiFi.localIP().toString().c_str());</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a16533f6ba079327c04196dc9b5b9415d">show_sds_values</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">      #ifndef RELEASE</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="main_8h.html#a702dd75ac1b5b78a0977a4f6e6b7d993">countSensorInterval</a>++;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="main_8h.html#a702dd75ac1b5b78a0977a4f6e6b7d993">countSensorInterval</a> == <a class="code" href="main_8h.html#aef6021251fa63b1e73a98864b809904e">STATS_INTERVAL</a>) &amp;&amp; !<a class="code" href="main_8h.html#abbe792bb2cf67584b86443440a194f46">busy</a>) {<a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aa9ad4f95f25f901187ad87f0e6018d42">show_2nd_screen</a>; <a class="code" href="main_8h.html#a702dd75ac1b5b78a0977a4f6e6b7d993">countSensorInterval</a>=0;}</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">      #endif</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#aa9ad4f95f25f901187ad87f0e6018d42">show_2nd_screen</a>:</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> != <a class="code" href="main_8h.html#a4011da054bc45bbb390af503eeed217e">oldErrCode</a>) <a class="code" href="nvs__storage_8h.html#a6760d47e1d13db30fe5eaa2d0b22e6f6">set_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;warning&quot;</span>, <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 31, (<span class="stringliteral">&quot;Reboot# &quot;</span>+String(<a class="code" href="main_8h.html#ae2c827b20e0e0b655e7c940bf586494e">resetCounter</a>-1)).c_str());</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 39, (<span class="stringliteral">&quot;Obsert# &quot;</span>+String(<a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a>)).c_str());</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 47, (<span class="stringliteral">&quot;Misses# &quot;</span>+String(<a class="code" href="main_8h.html#aca788da1bb94e00641b6b0c009cbe0cf">nObservations</a>)).c_str());</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 55, (<span class="stringliteral">&quot;Begins# &quot;</span>+<a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a>.substring(11)).c_str());</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 63, (<span class="stringliteral">&quot;      &quot;</span>+<a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a>.substring(0,10)).c_str());</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a609b956a4d0ad00d4d75401bc39d72d5">check_location_data</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">break</span>;      </div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a16533f6ba079327c04196dc9b5b9415d">show_sds_values</a>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>) </div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 7);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 31,  (<span class="stringliteral">&quot;PM2.5: &quot;</span>+String(<a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>,1)).c_str());</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 39,  (<span class="stringliteral">&quot;PM10:  &quot;</span>+String(<a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>,1)).c_str());</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] PM2.5: &quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(String(<a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>,1));</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a>(<span class="stringliteral">&quot;[sensor] PM10: &quot;</span>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a>(String(<a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>,1));</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        </div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        </div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>) </div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 7;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 31, <span class="stringliteral">&quot;FEINSTAUBSENSOR &quot;</span>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 39, <span class="stringliteral">&quot;:Bitte verbinden&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        </div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a82d12775392b9fb39924aca0ccfaf8c3">show_bme_values</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a82d12775392b9fb39924aca0ccfaf8c3">show_bme_values</a>:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)) || (<a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>))) </div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 6);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 5);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 47,  (<span class="stringliteral">&quot;Temp:  &quot;</span>+String(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>,1)).c_str());</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 55,  (<span class="stringliteral">&quot;Humid: &quot;</span>+String(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>,1)+<span class="stringliteral">&quot;%&quot;</span>).c_str());</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> &amp;&amp; !<a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a>) </div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        </div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        Serial.print(<span class="stringliteral">&quot;[sensor] Temp: Sensoren: &quot;</span>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        Serial.println(<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;&quot;</span>) || (<a class="code" href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a> == <span class="stringliteral">&quot;keiner&quot;</span>))</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 5;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 47, <span class="stringliteral">&quot;TEMPERATURSENSOR&quot;</span>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 55, <span class="stringliteral">&quot;Bitte auswaehlen&quot;</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">else</span> </div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;          <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 6;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 47, <span class="stringliteral">&quot;TEMPERATURSENSOR&quot;</span>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 55, <span class="stringliteral">&quot;Bitte verbinden&quot;</span>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 63,  (<span class="stringliteral">&quot;ID:&quot;</span>+<a class="code" href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a>).c_str()); </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordtype">char</span> er[3];</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      sprintf(er, <span class="stringliteral">&quot;E%02X&quot;</span>, <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a>);<span class="comment">//print a error indicating icon</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(103, 63, er); </div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a609b956a4d0ad00d4d75401bc39d72d5">check_location_data</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      </div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a609b956a4d0ad00d4d75401bc39d72d5">check_location_data</a>:</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">// only send if position data is given</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#af58473239b566ebd1187b4cc8c71e97d">ENABLE_SEND2FROST</a> &amp;&amp;  (<a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;latitude&quot;</span>) != <span class="stringliteral">&quot;&quot;</span>))</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 1);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        Serial.println(<span class="stringliteral">&quot;Position data is given, start sending&quot;</span>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a7ea0a51f9714623b29ed8e3797661c4a">check_timesync</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      }<span class="keywordflow">else</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 1;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;<span class="comment">//debugging: keep only this line</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a7ea0a51f9714623b29ed8e3797661c4a">check_timesync</a>:</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a>) <span class="comment">// if no time sync, then retry</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a> = waitForSync(<a class="code" href="main_8h.html#ad8124687637087b9096f96b838f93400">NTP_TIMEOUT_WAIT</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a>)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          Serial.println(<span class="stringliteral">&quot;got network time&quot;</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          Serial.println(<span class="stringliteral">&quot;sync network timeout&quot;</span>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <a class="code" href="timer__definitions_8h.html#aeb36d30620b2d08c6d267015771abf65">resetModule</a>();</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// in case timesync is true, send to frost</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">else</span> </div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a>)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a8b461628d2e578e6e7d2ddd79c83e2fc">initialised_frost</a>) </div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a6c50afc28a01316257d5e54a52bbc34c">create_frost_entties</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a6ac298bfc53f29aea6febdb80c418157">send_sds_data</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a6c50afc28a01316257d5e54a52bbc34c">create_frost_entties</a>:</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="comment">//send data to FROST</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="comment">// initialse frost manager</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      Serial.println(<span class="stringliteral">&quot;Initialze FROST manager (Server)...&quot;</span>);      </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">//disable IP address on display while FROST initiliasing</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0,23,<span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0,23,<span class="stringliteral">&quot;initialisiere...&quot;</span>); </div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      </div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">//check if the creating entities are seccessful?</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="main_8h.html#abbe792bb2cf67584b86443440a194f46">busy</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="main_8h.html#a8b461628d2e578e6e7d2ddd79c83e2fc">initialised_frost</a> = <a class="code" href="main_8h.html#a2bc07c34ce88e61fa0974a4624441358">createEntities</a>();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      </div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      </div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">//clear and re-display the IP address again</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0,23,<span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      delay(10);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 23, WiFi.localIP().toString().c_str());</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      delay(10);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      </div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="main_8h.html#a8b461628d2e578e6e7d2ddd79c83e2fc">initialised_frost</a>)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> &amp;= ~(1 &lt;&lt; 2);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <a class="code" href="main_8h.html#abbe792bb2cf67584b86443440a194f46">busy</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        Serial.println(<span class="stringliteral">&quot;Initialze FROST manager done!&quot;</span>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a> = <a class="code" href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;tom&quot;</span>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a> == <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;          <a class="code" href="nvs__storage_8h.html#a8f24cd3967a8bda9d9d45b73751a0d7e">set_value</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;tom&quot;</span>,<a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          <a class="code" href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a> = <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a6ac298bfc53f29aea6febdb80c418157">send_sds_data</a>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a> |= 1 &lt;&lt; 2;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        Serial.println(<span class="stringliteral">&quot;Initialze FROST manager failed!\n!!!Check the HTTP Server...!!!&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a6ac298bfc53f29aea6febdb80c418157">send_sds_data</a>:</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// send SDS data: send as often as a measurement occurs</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>) </div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        Serial.println(<span class="stringliteral">&quot;[sensor] Posting sds011 (PM10, PM2.5) values: (&quot;</span>+String(<a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>)+<span class="stringliteral">&quot;,&quot;</span>+String(<a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>)+<span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a> = <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a>+2;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">//post observation for datastream sds011 pm10</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a16b6701d5542db8a4a217041d30bd721">dsPM10</a>, <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>, <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>, <a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="comment">//post observation for datastream sds011 pm2.5</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a572be0340cd57a60408e46a3b1e46a1b">dsPM25</a>, <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>, <a class="code" href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a>, <a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aeea7587e2003788250822b7e8b696c10">send_bme_data</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#aeea7587e2003788250822b7e8b696c10">send_bme_data</a>:</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="comment">// send bme280 data: send hum and temp data</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)) </div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        Serial.println(<span class="stringliteral">&quot;[sensor] Posting bme280 (Temp, Hum, Atm) values: (&quot;</span>+String(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)+<span class="stringliteral">&quot;,&quot;</span>+String(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>)+<span class="stringliteral">&quot;,&quot;</span>+String(<a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>)+<span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a> = <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a>+3;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="nvs__storage_8h.html#a6760d47e1d13db30fe5eaa2d0b22e6f6">set_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;tObservation&quot;</span>, <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="nvs__storage_8h.html#a6760d47e1d13db30fe5eaa2d0b22e6f6">set_integer</a>(<span class="stringliteral">&quot;user_data&quot;</span>, <span class="stringliteral">&quot;nObservation&quot;</span>, <a class="code" href="main_8h.html#aca788da1bb94e00641b6b0c009cbe0cf">nObservations</a>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">//post observation for datastream bme280 temperature</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a793528db08466b6e4d82110abb3fbb7e">dsTmBme</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment">//post observation for datastream bme280 humidity</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a169ccab923f5b63fc64a62bc86e1f3d0">dsHmBme</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment">//post observation for datastream bme280 pressure</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a58d3249fa2e7ce2234ed1c4fb88addc0">dsPrBme</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#ada9c2f5830058322e8e29358a9a00621">send_dht_data</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#ada9c2f5830058322e8e29358a9a00621">send_dht_data</a>:</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// send dht22 data</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)) </div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        Serial.println(<span class="stringliteral">&quot;[sensor] Posting dht22 (Temp, Hum) values: (&quot;</span>+String(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)+<span class="stringliteral">&quot;,&quot;</span>+String(<a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>)+<span class="stringliteral">&quot;)&quot;</span>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a> = <a class="code" href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a>+2;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">//post observation for datastream dht22 temperature</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a793528db08466b6e4d82110abb3fbb7e">dsTmBme</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">//post observation for datastream dht22 humidity</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a>(<a class="code" href="main_8h.html#a169ccab923f5b63fc64a62bc86e1f3d0">dsHmBme</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a>, <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a9a56d8ccddbae8f646bb799874740cb9">send_to_madavi</a>:</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="comment">// send all data to madavi api</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      Serial.println(<span class="stringliteral">&quot;Sending all data to madavi&quot;</span>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// send data to madavi</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="send__data_8h.html#a36d8ac04841bab395f99e6173201dd0d">sendData</a>(<a class="code" href="create__json_8h.html#a228d39e3bffd6da29f60c52ecbdd3e8e">json_madavi</a>(<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>, <a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>, <a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>, <a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>, <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>, <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>).c_str(), <a class="code" href="main_8h.html#a3cdea54384a5fdd12b66a5ed35998aa6">destination_madavi</a>, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a1f42fec1f82e7402efdac5c43b62bd2b">send_to_luftdaten</a>:</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="comment">// send sds data to luftdaten if connected</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>) </div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        Serial.println(<span class="stringliteral">&quot;Sending sds data to luftdaten&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="send__data_8h.html#a36d8ac04841bab395f99e6173201dd0d">sendData</a>(<a class="code" href="create__json_8h.html#a922c41966ac4c3bca5e7fb38d3e62176">json_sds</a>(<a class="code" href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a>, <a class="code" href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a>, <a class="code" href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a>).c_str(), <a class="code" href="main_8h.html#ab1b2b41e0eb342878a19b53881efe30c">destination_luftdaten</a>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="comment">// send bme280 data to luftdaten if connected</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)) </div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        Serial.println(<span class="stringliteral">&quot;Sending bme data to luftdaten&quot;</span>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="send__data_8h.html#a36d8ac04841bab395f99e6173201dd0d">sendData</a>(<a class="code" href="create__json_8h.html#aa87d821dad1409cff38a689a84848afc">json_RHT</a>(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>, <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>, <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>).c_str(), <a class="code" href="main_8h.html#ab1b2b41e0eb342878a19b53881efe30c">destination_luftdaten</a>, <span class="stringliteral">&quot;11&quot;</span>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="comment">// send dht22 data to luftdaten if connected</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a> &amp;&amp; !isnan(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>)) </div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        Serial.println(<span class="stringliteral">&quot;Sending dht data to luftdaten&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="send__data_8h.html#a36d8ac04841bab395f99e6173201dd0d">sendData</a>(<a class="code" href="create__json_8h.html#aa87d821dad1409cff38a689a84848afc">json_RHT</a>(<a class="code" href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a>, <a class="code" href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a>, <a class="code" href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a>).c_str(), <a class="code" href="main_8h.html#ab1b2b41e0eb342878a19b53881efe30c">destination_luftdaten</a>, <span class="stringliteral">&quot;7&quot;</span>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#a65679973ed9b853177fec4156b4fe159">wifi_error</a>:      </div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.clearBuffer();</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 7,  <span class="stringliteral">&quot;VERBINDUNG      &quot;</span>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 15, <span class="stringliteral">&quot;FEHLGESCHLAGEN  &quot;</span>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 23, <span class="stringliteral">&quot;STARTE NEU...   &quot;</span>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 31, <span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 39, <span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 47, <span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 55, <span class="stringliteral">&quot;                &quot;</span>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.drawStr(0, 63, (<span class="stringliteral">&quot;ID:&quot;</span>+<a class="code" href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a>).c_str());</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a>.sendBuffer();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="timer__definitions_8h.html#aeb36d30620b2d08c6d267015771abf65">resetModule</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a>:</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="code" href="main_8h.html#a0ad2ed0873d73a0fde4a2d84a5a9c13d">idle_state</a>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">//handle client outside state machine to fast its response</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> &gt; <a class="code" href="main_8h.html#a0ad2ed0873d73a0fde4a2d84a5a9c13d">idle_state</a>) <a class="code" href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a>.handleClient();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div><div class="ttc" id="send__data_8h_html_a36d8ac04841bab395f99e6173201dd0d"><div class="ttname"><a href="send__data_8h.html#a36d8ac04841bab395f99e6173201dd0d">sendData</a></div><div class="ttdeci">void sendData(const char *data_json, char destination[], String pin)</div><div class="ttdoc">Send JSON data to API.</div><div class="ttdef"><b>Definition:</b> <a href="send__data_8h_source.html#l00029">send_data.h:29</a></div></div>
<div class="ttc" id="main_8h_html_aeea7587e2003788250822b7e8b696c10"><div class="ttname"><a href="main_8h.html#aeea7587e2003788250822b7e8b696c10">send_bme_data</a></div><div class="ttdeci">#define send_bme_data</div><div class="ttdoc">state machine send bme data state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00723">main.h:723</a></div></div>
<div class="ttc" id="sensor_8h_html_a8f7824c0f2a3aa7e9bac94eac190fa7e"><div class="ttname"><a href="sensor_8h.html#a8f7824c0f2a3aa7e9bac94eac190fa7e">SDS_SERIAL</a></div><div class="ttdeci">HardwareSerial SDS_SERIAL(2)</div><div class="ttdoc">use Serial 2 Object</div></div>
<div class="ttc" id="main_8h_html_ae445ddc35b16391cb8ed39779004ccbf"><div class="ttname"><a href="main_8h.html#ae445ddc35b16391cb8ed39779004ccbf">Config</a></div><div class="ttdeci">AutoConnectConfig Config</div><div class="ttdoc">initialise AutoConnectConfig</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01254">main.h:1254</a></div></div>
<div class="ttc" id="main_8h_html_a71a7a65f7dd7e8f3ea14942213cd8217"><div class="ttname"><a href="main_8h.html#a71a7a65f7dd7e8f3ea14942213cd8217">SENSOR_INTERVAL</a></div><div class="ttdeci">#define SENSOR_INTERVAL</div><div class="ttdoc">intervall of reading sensor data in ms</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00629">main.h:629</a></div></div>
<div class="ttc" id="main_8h_html_a4011da054bc45bbb390af503eeed217e"><div class="ttname"><a href="main_8h.html#a4011da054bc45bbb390af503eeed217e">oldErrCode</a></div><div class="ttdeci">unsigned int oldErrCode</div><div class="ttdoc">the error encodings last saved</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01175">main.h:1175</a></div></div>
<div class="ttc" id="main_8h_html_ace6bf58c74189bcd567c1135baaa9505"><div class="ttname"><a href="main_8h.html#ace6bf58c74189bcd567c1135baaa9505">ENABLE_SEND2LUFTDATEN</a></div><div class="ttdeci">#define ENABLE_SEND2LUFTDATEN</div><div class="ttdoc">switch for sending to luftdaten api</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00642">main.h:642</a></div></div>
<div class="ttc" id="sensor_8h_html_ac4a52bac518b8678882cf3be09d1148b"><div class="ttname"><a href="sensor_8h.html#ac4a52bac518b8678882cf3be09d1148b">sds</a></div><div class="ttdeci">SDS011 sds</div><div class="ttdoc">Dust sensor object.</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00029">sensor.h:29</a></div></div>
<div class="ttc" id="main_8h_html_a8cef1e025c75ebbda144d09f86d00786"><div class="ttname"><a href="main_8h.html#a8cef1e025c75ebbda144d09f86d00786">cfgUpdatePageAux</a></div><div class="ttdeci">AutoConnectAux cfgUpdatePageAux(&quot;/otaUpdate&quot;, &quot;Update&quot;, true, { otaScript })</div><div class="ttdoc">Crowdsensor OTA page cfgSensorPageAux based on different AutoConnect Elements.</div></div>
<div class="ttc" id="main_8h_html_a793528db08466b6e4d82110abb3fbb7e"><div class="ttname"><a href="main_8h.html#a793528db08466b6e4d82110abb3fbb7e">dsTmBme</a></div><div class="ttdeci">#define dsTmBme</div><div class="ttdoc">Post Observation Selector for BME280 Temperature.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00689">main.h:689</a></div></div>
<div class="ttc" id="main_8h_html_a6ac298bfc53f29aea6febdb80c418157"><div class="ttname"><a href="main_8h.html#a6ac298bfc53f29aea6febdb80c418157">send_sds_data</a></div><div class="ttdeci">#define send_sds_data</div><div class="ttdoc">state machine send sds data state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00721">main.h:721</a></div></div>
<div class="ttc" id="main_8h_html_a609b956a4d0ad00d4d75401bc39d72d5"><div class="ttname"><a href="main_8h.html#a609b956a4d0ad00d4d75401bc39d72d5">check_location_data</a></div><div class="ttdeci">#define check_location_data</div><div class="ttdoc">state machine check if position data is given state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00715">main.h:715</a></div></div>
<div class="ttc" id="sensor_8h_html_ad2b404eb4de525cef31b8413f5d14b13"><div class="ttname"><a href="sensor_8h.html#ad2b404eb4de525cef31b8413f5d14b13">SDS011_RXD</a></div><div class="ttdeci">#define SDS011_RXD</div><div class="ttdoc">SDS011 RXD pin is connected at TXD of Serial2 Object (no need to physically connect)</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00026">sensor.h:26</a></div></div>
<div class="ttc" id="main_8h_html_ad8124687637087b9096f96b838f93400"><div class="ttname"><a href="main_8h.html#ad8124687637087b9096f96b838f93400">NTP_TIMEOUT_WAIT</a></div><div class="ttdeci">#define NTP_TIMEOUT_WAIT</div><div class="ttdoc">Timeout for NTP timeout (s) in waitForSync()</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00656">main.h:656</a></div></div>
<div class="ttc" id="main_8h_html_adf3bfae0fe6a4992264f5b8f0d44432f"><div class="ttname"><a href="main_8h.html#adf3bfae0fe6a4992264f5b8f0d44432f">handleDummyResult</a></div><div class="ttdeci">void handleDummyResult()</div><div class="ttdoc">Function to handle the http://[IPAddress]/dummyResult response of Webserver::on(.....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01655">main.h:1655</a></div></div>
<div class="ttc" id="nvs__storage_8h_html_a8f24cd3967a8bda9d9d45b73751a0d7e"><div class="ttname"><a href="nvs__storage_8h.html#a8f24cd3967a8bda9d9d45b73751a0d7e">set_value</a></div><div class="ttdeci">void set_value(const char used_namespace[14], const char key_nvs[14], String value)</div><div class="ttdoc">store given value of a key in a namespace</div><div class="ttdef"><b>Definition:</b> <a href="nvs__storage_8h_source.html#l00027">nvs_storage.h:27</a></div></div>
<div class="ttc" id="nvs__storage_8h_html_a6760d47e1d13db30fe5eaa2d0b22e6f6"><div class="ttname"><a href="nvs__storage_8h.html#a6760d47e1d13db30fe5eaa2d0b22e6f6">set_integer</a></div><div class="ttdeci">void set_integer(const char used_namespace[14], const char key_nvs[14], unsigned int value)</div><div class="ttdoc">store given int value of a key in a namespace</div><div class="ttdef"><b>Definition:</b> <a href="nvs__storage_8h_source.html#l00080">nvs_storage.h:80</a></div></div>
<div class="ttc" id="sensor_8h_html_a9f6149e98e70e1d5be5f0f33921cb7d7"><div class="ttname"><a href="sensor_8h.html#a9f6149e98e70e1d5be5f0f33921cb7d7">BME_ADDR</a></div><div class="ttdeci">#define BME_ADDR</div><div class="ttdoc">BME280 I2C Address 0x77 for Red, 0x76 for Purple (chinese)</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00015">sensor.h:15</a></div></div>
<div class="ttc" id="create__json_8h_html_a0b8e8b6e49d8992ea37dc70d6cd105bb"><div class="ttname"><a href="create__json_8h.html#a0b8e8b6e49d8992ea37dc70d6cd105bb">use_dht22</a></div><div class="ttdeci">bool use_dht22</div><div class="ttdoc">Externally define variable to check if using dht22.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01153">main.h:1153</a></div></div>
<div class="ttc" id="main_8h_html_a572be0340cd57a60408e46a3b1e46a1b"><div class="ttname"><a href="main_8h.html#a572be0340cd57a60408e46a3b1e46a1b">dsPM25</a></div><div class="ttdeci">#define dsPM25</div><div class="ttdoc">Post Observation Selector for SDS011 PM25.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00683">main.h:683</a></div></div>
<div class="ttc" id="main_8h_html_a27d0e99a6ba203be7c65cd32285853c2"><div class="ttname"><a href="main_8h.html#a27d0e99a6ba203be7c65cd32285853c2">updateHandlerResponse</a></div><div class="ttdeci">void updateHandlerResponse(void)</div><div class="ttdoc">Function to handle the http://[IPAddress]/update HTTP_GET response of Webserver::on(....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01819">main.h:1819</a></div></div>
<div class="ttc" id="main_8h_html_a7dac1877da78ff920a2ab2795ede976d"><div class="ttname"><a href="main_8h.html#a7dac1877da78ff920a2ab2795ede976d">start_measurement_sds</a></div><div class="ttdeci">#define start_measurement_sds</div><div class="ttdoc">state machine start measurement state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00707">main.h:707</a></div></div>
<div class="ttc" id="sensor_8h_html_a5db75d8e5f3deda546603b949c520446"><div class="ttname"><a href="sensor_8h.html#a5db75d8e5f3deda546603b949c520446">BME_SCL</a></div><div class="ttdeci">#define BME_SCL</div><div class="ttdoc">BME280 I2C SCL pin.</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00019">sensor.h:19</a></div></div>
<div class="ttc" id="main_8h_html_acbb11c1e34784cf1e3147029f942bfd6"><div class="ttname"><a href="main_8h.html#acbb11c1e34784cf1e3147029f942bfd6">BASE_URL</a></div><div class="ttdeci">#define BASE_URL</div><div class="ttdoc">Debugging, uncomment to switch servers to release version, enable sending to madavi and luftdaten....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00600">main.h:600</a></div></div>
<div class="ttc" id="main_8h_html_a5e122034cdfb5584cc1ee2b30068327c"><div class="ttname"><a href="main_8h.html#a5e122034cdfb5584cc1ee2b30068327c">humanReadableLocation</a></div><div class="ttdeci">String humanReadableLocation</div><div class="ttdoc">Human Readable Name of the street location.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01211">main.h:1211</a></div></div>
<div class="ttc" id="main_8h_html_ae2c827b20e0e0b655e7c940bf586494e"><div class="ttname"><a href="main_8h.html#ae2c827b20e0e0b655e7c940bf586494e">resetCounter</a></div><div class="ttdeci">unsigned int resetCounter</div><div class="ttdoc">No. of reboots.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01169">main.h:1169</a></div></div>
<div class="ttc" id="main_8h_html_ac0c97362dcfdb40676d7f1b48843aa73"><div class="ttname"><a href="main_8h.html#ac0c97362dcfdb40676d7f1b48843aa73">SDS011_Serial</a></div><div class="ttdeci">String SDS011_Serial</div><div class="ttdoc">ID written of SDS011 Sensor.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01227">main.h:1227</a></div></div>
<div class="ttc" id="main_8h_html_a8b461628d2e578e6e7d2ddd79c83e2fc"><div class="ttname"><a href="main_8h.html#a8b461628d2e578e6e7d2ddd79c83e2fc">initialised_frost</a></div><div class="ttdeci">bool initialised_frost</div><div class="ttdoc">if frost manager is initialized, i.e. entities are createdd on the server seccessfully</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01155">main.h:1155</a></div></div>
<div class="ttc" id="main_8h_html_a24d61a35b72d7299eb6b5f48e71a571b"><div class="ttname"><a href="main_8h.html#a24d61a35b72d7299eb6b5f48e71a571b">temp</a></div><div class="ttdeci">float temp</div><div class="ttdoc">temperature values</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01185">main.h:1185</a></div></div>
<div class="ttc" id="main_8h_html_a7ea0a51f9714623b29ed8e3797661c4a"><div class="ttname"><a href="main_8h.html#a7ea0a51f9714623b29ed8e3797661c4a">check_timesync</a></div><div class="ttdeci">#define check_timesync</div><div class="ttdoc">state machine check NTP sync again state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00717">main.h:717</a></div></div>
<div class="ttc" id="main_8h_html_a16b6701d5542db8a4a217041d30bd721"><div class="ttname"><a href="main_8h.html#a16b6701d5542db8a4a217041d30bd721">dsPM10</a></div><div class="ttdeci">#define dsPM10</div><div class="ttdoc">Post Observation Selector for SDS011 PM10.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00685">main.h:685</a></div></div>
<div class="ttc" id="main_8h_html_aeeb61519219a4061ee127e34907eddeb"><div class="ttname"><a href="main_8h.html#aeeb61519219a4061ee127e34907eddeb">MY_DBGln</a></div><div class="ttdeci">#define MY_DBGln(...)</div><div class="ttdoc">Define MY_DEBln() for controlling serial.println debugging.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00618">main.h:618</a></div></div>
<div class="ttc" id="display_8h_html_af7a8a9120f1d9d90783dd6761f1a1f56"><div class="ttname"><a href="display_8h.html#af7a8a9120f1d9d90783dd6761f1a1f56">generateQRCode</a></div><div class="ttdeci">void generateQRCode(unsigned int xinit, unsigned int yinit, const char *txt)</div><div class="ttdoc">Generate the QR code.</div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00289">display.h:289</a></div></div>
<div class="ttc" id="main_8h_html_ac9ef7d3d153097fbb69d59b22c2a91fa"><div class="ttname"><a href="main_8h.html#ac9ef7d3d153097fbb69d59b22c2a91fa">postObservation</a></div><div class="ttdeci">void postObservation(int datastream, String phenomenonTime, String resultTime, double result)</div><div class="ttdoc">Post Observation for sensed vaules of PM25, PM10, humidity, temperature and Pressure (HTTP Post)</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l02581">main.h:2581</a></div></div>
<div class="ttc" id="main_8h_html_a5152df7312b570a9c04d0305577d4113"><div class="ttname"><a href="main_8h.html#a5152df7312b570a9c04d0305577d4113">errorCode</a></div><div class="ttdeci">unsigned int errorCode</div><div class="ttdoc">the error encodings</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01173">main.h:1173</a></div></div>
<div class="ttc" id="main_8h_html_a48bba4089cfca5de5189167f78b37a32"><div class="ttname"><a href="main_8h.html#a48bba4089cfca5de5189167f78b37a32">status_sds</a></div><div class="ttdeci">int status_sds</div><div class="ttdoc">sds status</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01195">main.h:1195</a></div></div>
<div class="ttc" id="main_8h_html_a1e3ac1a8a94702170acdd1bc934b1f87"><div class="ttname"><a href="main_8h.html#a1e3ac1a8a94702170acdd1bc934b1f87">time_updated</a></div><div class="ttdeci">bool time_updated</div><div class="ttdoc">if NTP time is synced</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01163">main.h:1163</a></div></div>
<div class="ttc" id="main_8h_html_a4f4d9c9083a56baa7390e6c2b94f853d"><div class="ttname"><a href="main_8h.html#a4f4d9c9083a56baa7390e6c2b94f853d">pm10</a></div><div class="ttdeci">float pm10</div><div class="ttdoc">vars to store sensor results, sensor results for dust sensor pm10</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01181">main.h:1181</a></div></div>
<div class="ttc" id="esp32-stationary_8ino_html_afe461d27b9c48d5921c00d521181f12f"><div class="ttname"><a href="esp32-stationary_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">reading the Microphone with timer function</div><div class="ttdef"><b>Definition:</b> <a href="esp32-stationary_8ino_source.html#l00172">esp32-stationary.ino:172</a></div></div>
<div class="ttc" id="main_8h_html_a702dd75ac1b5b78a0977a4f6e6b7d993"><div class="ttname"><a href="main_8h.html#a702dd75ac1b5b78a0977a4f6e6b7d993">countSensorInterval</a></div><div class="ttdeci">unsigned int countSensorInterval</div><div class="ttdoc">count the intervals of sensor measurement</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01177">main.h:1177</a></div></div>
<div class="ttc" id="main_8h_html_adb1e5699d1d537b00a661d58f303b8c0"><div class="ttname"><a href="main_8h.html#adb1e5699d1d537b00a661d58f303b8c0">otaUpdateHandler</a></div><div class="ttdeci">void otaUpdateHandler(void)</div><div class="ttdoc">Function to handle the http://[IPAddress]/otaUpdate HTTP_POST response of Webserver::on(....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01801">main.h:1801</a></div></div>
<div class="ttc" id="main_8h_html"><div class="ttname"><a href="main_8h.html">main.h</a></div><div class="ttdoc">This the main page for the SMARTAQNET which is the core of the project.</div></div>
<div class="ttc" id="main_8h_html_a0ad2ed0873d73a0fde4a2d84a5a9c13d"><div class="ttname"><a href="main_8h.html#a0ad2ed0873d73a0fde4a2d84a5a9c13d">idle_state</a></div><div class="ttdeci">#define idle_state</div><div class="ttdoc">state machine idle state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00703">main.h:703</a></div></div>
<div class="ttc" id="create__json_8h_html_aa87d821dad1409cff38a689a84848afc"><div class="ttname"><a href="create__json_8h.html#aa87d821dad1409cff38a689a84848afc">json_RHT</a></div><div class="ttdeci">String json_RHT(float temp, float hum, float atm)</div><div class="ttdoc">create a json string for temperature &amp; Humidity</div><div class="ttdef"><b>Definition:</b> <a href="create__json_8h_source.html#l00131">create_json.h:131</a></div></div>
<div class="ttc" id="main_8h_html_a6c50afc28a01316257d5e54a52bbc34c"><div class="ttname"><a href="main_8h.html#a6c50afc28a01316257d5e54a52bbc34c">create_frost_entties</a></div><div class="ttdeci">#define create_frost_entties</div><div class="ttdoc">state machine check if frost is initialized state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00719">main.h:719</a></div></div>
<div class="ttc" id="main_8h_html_a9cc80dc9c5ed579f2b36bfa188649c73"><div class="ttname"><a href="main_8h.html#a9cc80dc9c5ed579f2b36bfa188649c73">pm25</a></div><div class="ttdeci">float pm25</div><div class="ttdoc">sensor results for dust sensor pm25</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01183">main.h:1183</a></div></div>
<div class="ttc" id="main_8h_html_a3cdea54384a5fdd12b66a5ed35998aa6"><div class="ttname"><a href="main_8h.html#a3cdea54384a5fdd12b66a5ed35998aa6">destination_madavi</a></div><div class="ttdeci">char destination_madavi[]</div><div class="ttdoc">host to send data madavi API</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01236">main.h:1236</a></div></div>
<div class="ttc" id="main_8h_html_a20655b59a0bc9b760da65c4e6793a981"><div class="ttname"><a href="main_8h.html#a20655b59a0bc9b760da65c4e6793a981">rhtSensor</a></div><div class="ttdeci">String rhtSensor</div><div class="ttdoc">rht sensor global variable</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01213">main.h:1213</a></div></div>
<div class="ttc" id="classmy_auto_connect_html_aeb57ccef1c16394c297a2ea2fd143f52"><div class="ttname"><a href="classmy_auto_connect.html#aeb57ccef1c16394c297a2ea2fd143f52">myAutoConnect::begin</a></div><div class="ttdeci">bool begin(void)</div><div class="ttdef"><b>Definition:</b> <a href="my_auto_connect_8h_source.html#l00104">myAutoConnect.h:104</a></div></div>
<div class="ttc" id="main_8h_html_a8a1756fdd61bca61d188ce01ece876b9"><div class="ttname"><a href="main_8h.html#a8a1756fdd61bca61d188ce01ece876b9">APMODE_REBOOT_TIMEOUT</a></div><div class="ttdeci">#define APMODE_REBOOT_TIMEOUT</div><div class="ttdoc">intervall of auto reboot while in access point mode (config mode) in ms (600000ms is 10min)....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00654">main.h:654</a></div></div>
<div class="ttc" id="main_8h_html_a8687b46efcc1aac7c80814a74bac954b"><div class="ttname"><a href="main_8h.html#a8687b46efcc1aac7c80814a74bac954b">esp32_chipid</a></div><div class="ttdeci">String esp32_chipid</div><div class="ttdoc">Chip ID based on MAC.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01231">main.h:1231</a></div></div>
<div class="ttc" id="main_8h_html_a2bc07c34ce88e61fa0974a4624441358"><div class="ttname"><a href="main_8h.html#a2bc07c34ce88e61fa0974a4624441358">createEntities</a></div><div class="ttdeci">bool createEntities()</div><div class="ttdoc">create different entities like Thing, Sensor, Datastream, ObservedProperties, &amp; Location and Patch if...</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l02193">main.h:2193</a></div></div>
<div class="ttc" id="main_8h_html_a5f57bb0b8398ff5387d9d949c3e7e5df"><div class="ttname"><a href="main_8h.html#a5f57bb0b8398ff5387d9d949c3e7e5df">start_showing</a></div><div class="ttdeci">#define start_showing</div><div class="ttdoc">state to start showing screens</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00739">main.h:739</a></div></div>
<div class="ttc" id="main_8h_html_af8a025eb9635063f1b8c74904e2984e6"><div class="ttname"><a href="main_8h.html#af8a025eb9635063f1b8c74904e2984e6">handleDummy</a></div><div class="ttdeci">void handleDummy()</div><div class="ttdoc">Function to handle the http://[IPAddress]/dummy response of Webserver::on(...). This is a dummy url f...</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01601">main.h:1601</a></div></div>
<div class="ttc" id="main_8h_html_a1f42fec1f82e7402efdac5c43b62bd2b"><div class="ttname"><a href="main_8h.html#a1f42fec1f82e7402efdac5c43b62bd2b">send_to_luftdaten</a></div><div class="ttdeci">#define send_to_luftdaten</div><div class="ttdoc">state machine send luftdaten data state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00729">main.h:729</a></div></div>
<div class="ttc" id="main_8h_html_ab12828525693568ae9c217805bea1ef9"><div class="ttname"><a href="main_8h.html#ab12828525693568ae9c217805bea1ef9">state</a></div><div class="ttdeci">unsigned char state</div><div class="ttdoc">state machine tracking variable</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01201">main.h:1201</a></div></div>
<div class="ttc" id="main_8h_html_a5fcc3dc147772d5725cd4a6956a71c62"><div class="ttname"><a href="main_8h.html#a5fcc3dc147772d5725cd4a6956a71c62">license_url</a></div><div class="ttdeci">String license_url</div><div class="ttdoc">License Meta for License property.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01223">main.h:1223</a></div></div>
<div class="ttc" id="sensor_8h_html_a81137dc3df575cf0e1b5eca255bca279"><div class="ttname"><a href="sensor_8h.html#a81137dc3df575cf0e1b5eca255bca279">dht</a></div><div class="ttdeci">DHT dht(DHT_PIN, DHT22)</div><div class="ttdoc">DHT22 Temperature &amp; Humidity Sensor Object.</div></div>
<div class="ttc" id="main_8h_html_a65679973ed9b853177fec4156b4fe159"><div class="ttname"><a href="main_8h.html#a65679973ed9b853177fec4156b4fe159">wifi_error</a></div><div class="ttdeci">#define wifi_error</div><div class="ttdoc">state machine WiFi error state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00731">main.h:731</a></div></div>
<div class="ttc" id="timer__definitions_8h_html_a76bc0a7db1e7b525a8564174240fd93c"><div class="ttname"><a href="timer__definitions_8h.html#a76bc0a7db1e7b525a8564174240fd93c">previousMillis_sensor</a></div><div class="ttdeci">unsigned long previousMillis_sensor</div><div class="ttdoc">will store the last time the event (in loop) was triggered for sending sensor values to FrostManager</div><div class="ttdef"><b>Definition:</b> <a href="timer__definitions_8h_source.html#l00011">timer_definitions.h:11</a></div></div>
<div class="ttc" id="main_8h_html_a423126ae538bf9e83239e46e46cf1df9"><div class="ttname"><a href="main_8h.html#a423126ae538bf9e83239e46e46cf1df9">TIMETOREBOOT</a></div><div class="ttdeci">#define TIMETOREBOOT</div><div class="ttdoc">set time when to do daily reboot (hour of time of day for reboot goes here) //TODO set proper time</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00652">main.h:652</a></div></div>
<div class="ttc" id="create__json_8h_html_a922c41966ac4c3bca5e7fb38d3e62176"><div class="ttname"><a href="create__json_8h.html#a922c41966ac4c3bca5e7fb38d3e62176">json_sds</a></div><div class="ttdeci">String json_sds(bool status_sds, float pm10, float pm25)</div><div class="ttdoc">create a json string for SDS values</div><div class="ttdef"><b>Definition:</b> <a href="create__json_8h_source.html#l00092">create_json.h:92</a></div></div>
<div class="ttc" id="main_8h_html_a58acc281c69407e3fff9fd37ebb230c1"><div class="ttname"><a href="main_8h.html#a58acc281c69407e3fff9fd37ebb230c1">getHourMinute</a></div><div class="ttdeci">String getHourMinute()</div><div class="ttdoc">Get hours from the time.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01577">main.h:1577</a></div></div>
<div class="ttc" id="main_8h_html_a18bdfe88e9f5895863740df7ad801109"><div class="ttname"><a href="main_8h.html#a18bdfe88e9f5895863740df7ad801109">ENABLE_DAILY_REBOOT</a></div><div class="ttdeci">#define ENABLE_DAILY_REBOOT</div><div class="ttdoc">enable daily reboot at specific time</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00649">main.h:649</a></div></div>
<div class="ttc" id="main_8h_html_af58473239b566ebd1187b4cc8c71e97d"><div class="ttname"><a href="main_8h.html#af58473239b566ebd1187b4cc8c71e97d">ENABLE_SEND2FROST</a></div><div class="ttdeci">#define ENABLE_SEND2FROST</div><div class="ttdoc">switch for sending to FROST teco server</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00627">main.h:627</a></div></div>
<div class="ttc" id="main_8h_html_aa5fd956c1fb06e1fb9a73417d30bf15e"><div class="ttname"><a href="main_8h.html#aa5fd956c1fb06e1fb9a73417d30bf15e">timeofmeas_rht</a></div><div class="ttdeci">String timeofmeas_rht</div><div class="ttdoc">time of measurement for rht reading</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01193">main.h:1193</a></div></div>
<div class="ttc" id="main_8h_html_abbe792bb2cf67584b86443440a194f46"><div class="ttname"><a href="main_8h.html#abbe792bb2cf67584b86443440a194f46">busy</a></div><div class="ttdeci">bool busy</div><div class="ttdoc">indicated the busy status while entities are being created on the server</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01157">main.h:1157</a></div></div>
<div class="ttc" id="main_8h_html_a9a56d8ccddbae8f646bb799874740cb9"><div class="ttname"><a href="main_8h.html#a9a56d8ccddbae8f646bb799874740cb9">send_to_madavi</a></div><div class="ttdeci">#define send_to_madavi</div><div class="ttdoc">state machine send madavi data state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00727">main.h:727</a></div></div>
<div class="ttc" id="main_8h_html_ac18409cbc727fcbb81831d42abceffc2"><div class="ttname"><a href="main_8h.html#ac18409cbc727fcbb81831d42abceffc2">updateHandler</a></div><div class="ttdeci">void updateHandler(void)</div><div class="ttdoc">Function to handle the http://[IPAddress]/update HTTP_POST response of Webserver::on(....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01810">main.h:1810</a></div></div>
<div class="ttc" id="main_8h_html_a006303577d6adb772761727538b74f80"><div class="ttname"><a href="main_8h.html#a006303577d6adb772761727538b74f80">longitude</a></div><div class="ttdeci">float longitude</div><div class="ttdoc">Location longitude Point.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01205">main.h:1205</a></div></div>
<div class="ttc" id="timer__definitions_8h_html_a766f70fd244dfc2b331536707e143a58"><div class="ttname"><a href="timer__definitions_8h.html#a766f70fd244dfc2b331536707e143a58">previousMillis_send2luftdaten</a></div><div class="ttdeci">unsigned long previousMillis_send2luftdaten</div><div class="ttdoc">will store the last time the event (in loop) was triggered sending sensor values to luftdaten</div><div class="ttdef"><b>Definition:</b> <a href="timer__definitions_8h_source.html#l00015">timer_definitions.h:15</a></div></div>
<div class="ttc" id="main_8h_html_a16533f6ba079327c04196dc9b5b9415d"><div class="ttname"><a href="main_8h.html#a16533f6ba079327c04196dc9b5b9415d">show_sds_values</a></div><div class="ttdeci">#define show_sds_values</div><div class="ttdoc">state machine show valid SDS values state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00711">main.h:711</a></div></div>
<div class="ttc" id="main_8h_html_a953ca2c42ce0015ef8c2965e3b395100"><div class="ttname"><a href="main_8h.html#a953ca2c42ce0015ef8c2965e3b395100">CREDENTIAL_OFFSET</a></div><div class="ttdeci">#define CREDENTIAL_OFFSET</div><div class="ttdoc">Specified the offset if the user data exists.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00663">main.h:663</a></div></div>
<div class="ttc" id="display_8h_html_a90f337b111dcfc6f8ff751f5b6a876ee"><div class="ttname"><a href="display_8h.html#a90f337b111dcfc6f8ff751f5b6a876ee">kit</a></div><div class="ttdeci">const uint8_t PROGMEM kit[]</div><div class="ttdoc">KIT Icon bits of size 64x128.</div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00116">display.h:116</a></div></div>
<div class="ttc" id="create__json_8h_html_a268d9b1e5e404ee689ae7bf1ca226942"><div class="ttname"><a href="create__json_8h.html#a268d9b1e5e404ee689ae7bf1ca226942">use_bme280</a></div><div class="ttdeci">bool use_bme280</div><div class="ttdoc">Externally define variable to check if using bme280.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01151">main.h:1151</a></div></div>
<div class="ttc" id="main_8h_html_a38adb4de3d9d0391675c323d13503af7"><div class="ttname"><a href="main_8h.html#a38adb4de3d9d0391675c323d13503af7">hum</a></div><div class="ttdeci">float hum</div><div class="ttdoc">humidity values</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01187">main.h:1187</a></div></div>
<div class="ttc" id="main_8h_html_a5fa85ffee34300f181ee595ca35caac9"><div class="ttname"><a href="main_8h.html#a5fa85ffee34300f181ee595ca35caac9">abovenn</a></div><div class="ttdeci">float abovenn</div><div class="ttdoc">Location abovenn Point.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01207">main.h:1207</a></div></div>
<div class="ttc" id="sensor_8h_html_a2871708605796e3f6cfa9cd9328daff3"><div class="ttname"><a href="sensor_8h.html#a2871708605796e3f6cfa9cd9328daff3">bme</a></div><div class="ttdeci">Adafruit_BME280 bme</div><div class="ttdoc">BME280 Pressure &amp; Humidity Sensor Object.</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00032">sensor.h:32</a></div></div>
<div class="ttc" id="main_8h_html_ad9a1e86fe8a8ccdeddbd435307dc8b9c"><div class="ttname"><a href="main_8h.html#ad9a1e86fe8a8ccdeddbd435307dc8b9c">handleRoot</a></div><div class="ttdeci">String handleRoot(AutoConnectAux &amp;aux, PageArgument &amp;args)</div><div class="ttdoc">Function to handle the http://[IPAddress]/ response of AutoConnect::on(...)</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01770">main.h:1770</a></div></div>
<div class="ttc" id="main_8h_html_a58d3249fa2e7ce2234ed1c4fb88addc0"><div class="ttname"><a href="main_8h.html#a58d3249fa2e7ce2234ed1c4fb88addc0">dsPrBme</a></div><div class="ttdeci">#define dsPrBme</div><div class="ttdoc">Post Observation Selector for BME280 Pressure.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00691">main.h:691</a></div></div>
<div class="ttc" id="timer__definitions_8h_html_aeb36d30620b2d08c6d267015771abf65"><div class="ttname"><a href="timer__definitions_8h.html#aeb36d30620b2d08c6d267015771abf65">resetModule</a></div><div class="ttdeci">void IRAM_ATTR resetModule()</div><div class="ttdoc">ISR functions called for Reset ESP32.</div><div class="ttdef"><b>Definition:</b> <a href="timer__definitions_8h_source.html#l00030">timer_definitions.h:30</a></div></div>
<div class="ttc" id="main_8h_html_a18d121e3e45bfea386799ad36fb70b5f"><div class="ttname"><a href="main_8h.html#a18d121e3e45bfea386799ad36fb70b5f">ENABLE_SEND2MADAVI</a></div><div class="ttdeci">#define ENABLE_SEND2MADAVI</div><div class="ttdoc">switch for sending to madavi api</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00640">main.h:640</a></div></div>
<div class="ttc" id="main_8h_html_ab4f15e5e4298004d97fe1734ee796f5e"><div class="ttname"><a href="main_8h.html#ab4f15e5e4298004d97fe1734ee796f5e">Server</a></div><div class="ttdeci">WebServer Server</div><div class="ttdoc">initialise Webserver</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01249">main.h:1249</a></div></div>
<div class="ttc" id="main_8h_html_ab858f3b72becb912c937938bb7432cef"><div class="ttname"><a href="main_8h.html#ab858f3b72becb912c937938bb7432cef">license_owner</a></div><div class="ttdeci">String license_owner</div><div class="ttdoc">License Owner for License property.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01221">main.h:1221</a></div></div>
<div class="ttc" id="main_8h_html_aa9ad4f95f25f901187ad87f0e6018d42"><div class="ttname"><a href="main_8h.html#aa9ad4f95f25f901187ad87f0e6018d42">show_2nd_screen</a></div><div class="ttdeci">#define show_2nd_screen</div><div class="ttdoc">state to show the 2nd screen</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00737">main.h:737</a></div></div>
<div class="ttc" id="main_8h_html_ab1b2b41e0eb342878a19b53881efe30c"><div class="ttname"><a href="main_8h.html#ab1b2b41e0eb342878a19b53881efe30c">destination_luftdaten</a></div><div class="ttdeci">char destination_luftdaten[]</div><div class="ttdoc">host to send data luftdaten API</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01238">main.h:1238</a></div></div>
<div class="ttc" id="main_8h_html_a4a74679696693029b3d08dddaa209237"><div class="ttname"><a href="main_8h.html#a4a74679696693029b3d08dddaa209237">check_first_sync</a></div><div class="ttdeci">#define check_first_sync</div><div class="ttdoc">state machine check NTP sync state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00701">main.h:701</a></div></div>
<div class="ttc" id="sensor_8h_html_a7130f8006502cdaa31094baa3f4dd3fa"><div class="ttname"><a href="sensor_8h.html#a7130f8006502cdaa31094baa3f4dd3fa">SDS011_TXD</a></div><div class="ttdeci">#define SDS011_TXD</div><div class="ttdoc">SDS011 TXD pin is connected at RXD of Serial2 Object.</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00024">sensor.h:24</a></div></div>
<div class="ttc" id="main_8h_html_a45c8cb99f0dede42cd17b3cae73344d2"><div class="ttname"><a href="main_8h.html#a45c8cb99f0dede42cd17b3cae73344d2">tObservations</a></div><div class="ttdeci">unsigned int tObservations</div><div class="ttdoc">total number of observations posted</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01165">main.h:1165</a></div></div>
<div class="ttc" id="main_8h_html_a6f4b34eadf0db60197dce3a76e0d6632"><div class="ttname"><a href="main_8h.html#a6f4b34eadf0db60197dce3a76e0d6632">SEND2MADAVI_INTERVAL</a></div><div class="ttdeci">#define SEND2MADAVI_INTERVAL</div><div class="ttdoc">intervall of sending to madavi api in ms</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00645">main.h:645</a></div></div>
<div class="ttc" id="timer__definitions_8h_html_a2740fe7e1d5e609878b6c6348c78c97e"><div class="ttname"><a href="timer__definitions_8h.html#a2740fe7e1d5e609878b6c6348c78c97e">previousMillis_send2madavi</a></div><div class="ttdeci">unsigned long previousMillis_send2madavi</div><div class="ttdoc">will store the last time the event (in loop) was triggered sending sensor values to madavi</div><div class="ttdef"><b>Definition:</b> <a href="timer__definitions_8h_source.html#l00013">timer_definitions.h:13</a></div></div>
<div class="ttc" id="main_8h_html_a82d12775392b9fb39924aca0ccfaf8c3"><div class="ttname"><a href="main_8h.html#a82d12775392b9fb39924aca0ccfaf8c3">show_bme_values</a></div><div class="ttdeci">#define show_bme_values</div><div class="ttdoc">state machine show valid BME values state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00713">main.h:713</a></div></div>
<div class="ttc" id="nvs__storage_8h_html_a9cb2aa85b8726ebe087e369d4ccadeed"><div class="ttname"><a href="nvs__storage_8h.html#a9cb2aa85b8726ebe087e369d4ccadeed">get_value</a></div><div class="ttdeci">String get_value(const char used_namespace[14], const char key_nvs[14])</div><div class="ttdoc">retrieve given value of a key in a namespace</div><div class="ttdef"><b>Definition:</b> <a href="nvs__storage_8h_source.html#l00051">nvs_storage.h:51</a></div></div>
<div class="ttc" id="main_8h_html_aa14dc39d52ab121ceb570f1a265385e0"><div class="ttname"><a href="main_8h.html#aa14dc39d52ab121ceb570f1a265385e0">FIRMWARE_VERSION</a></div><div class="ttdeci">#define FIRMWARE_VERSION</div><div class="ttdoc">firmware version, (for intermediate versions being actively worked on, append &quot;pre&quot; to number,...</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00587">main.h:587</a></div></div>
<div class="ttc" id="main_8h_html_a7a63477c73052322ebb3ea6f1bfe7e1d"><div class="ttname"><a href="main_8h.html#a7a63477c73052322ebb3ea6f1bfe7e1d">SEND2LUFTDATEN_INTERVAL</a></div><div class="ttdeci">#define SEND2LUFTDATEN_INTERVAL</div><div class="ttdoc">intervall of sending to madavi api in ms</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00647">main.h:647</a></div></div>
<div class="ttc" id="main_8h_html_aef6021251fa63b1e73a98864b809904e"><div class="ttname"><a href="main_8h.html#aef6021251fa63b1e73a98864b809904e">STATS_INTERVAL</a></div><div class="ttdeci">#define STATS_INTERVAL</div><div class="ttdoc">intervall of showing statistics informations, it is multiple of SENSOR_INTERVAL i....</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00631">main.h:631</a></div></div>
<div class="ttc" id="main_8h_html_a98e7dcb90b2217dfda04e31e818653ae"><div class="ttname"><a href="main_8h.html#a98e7dcb90b2217dfda04e31e818653ae">check_server_status</a></div><div class="ttdeci">#define check_server_status</div><div class="ttdoc">state machine check server response state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00735">main.h:735</a></div></div>
<div class="ttc" id="display_8h_html_aebb9279b6ac68e870eb73247f246f5c6"><div class="ttname"><a href="display_8h.html#aebb9279b6ac68e870eb73247f246f5c6">u8g2</a></div><div class="ttdeci">U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2</div><div class="ttdoc">U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ 16, /* clock=*/ 15, /* data=*/ 4);.</div></div>
<div class="ttc" id="my_auto_connect_8h_html_a6ce689b93ca03523ef06cf93473494dc"><div class="ttname"><a href="my_auto_connect_8h.html#a6ce689b93ca03523ef06cf93473494dc">show_QR</a></div><div class="ttdeci">boolean show_QR</div><div class="ttdoc">show QR or Text for AP</div><div class="ttdef"><b>Definition:</b> <a href="my_auto_connect_8h_source.html#l00047">myAutoConnect.h:47</a></div></div>
<div class="ttc" id="main_8h_html_ada9c2f5830058322e8e29358a9a00621"><div class="ttname"><a href="main_8h.html#ada9c2f5830058322e8e29358a9a00621">send_dht_data</a></div><div class="ttdeci">#define send_dht_data</div><div class="ttdoc">state machine send dht data state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00725">main.h:725</a></div></div>
<div class="ttc" id="main_8h_html_a7d031eabfc5343396f4e4a58c99f8230"><div class="ttname"><a href="main_8h.html#a7d031eabfc5343396f4e4a58c99f8230">atm</a></div><div class="ttdeci">float atm</div><div class="ttdoc">pressure values</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01189">main.h:1189</a></div></div>
<div class="ttc" id="main_8h_html_a0f5ccee55c72d24ff7c869b5f061a1a2"><div class="ttname"><a href="main_8h.html#a0f5ccee55c72d24ff7c869b5f061a1a2">timeofmeas_sds</a></div><div class="ttdeci">String timeofmeas_sds</div><div class="ttdoc">time of measurement for sds reading</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01191">main.h:1191</a></div></div>
<div class="ttc" id="main_8h_html_a26b99cccf6c7e87054577b293e709733"><div class="ttname"><a href="main_8h.html#a26b99cccf6c7e87054577b293e709733">handleConfig</a></div><div class="ttdeci">void handleConfig()</div><div class="ttdoc">Function to handle the http://[IPAddress]/config response of Webserver::on(...) after button submissi...</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01704">main.h:1704</a></div></div>
<div class="ttc" id="sensor_8h_html_ad9e594e426bce833af06dea308dbbf9a"><div class="ttname"><a href="sensor_8h.html#ad9e594e426bce833af06dea308dbbf9a">BME_SDA</a></div><div class="ttdeci">#define BME_SDA</div><div class="ttdoc">BME280 I2C SDA pin.</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00017">sensor.h:17</a></div></div>
<div class="ttc" id="main_8h_html_ac1cd281996f2d93f7b23cfcc2934edb5"><div class="ttname"><a href="main_8h.html#ac1cd281996f2d93f7b23cfcc2934edb5">cfgSensorPageAux</a></div><div class="ttdeci">AutoConnectAux cfgSensorPageAux(&quot;/&quot;, &quot;Configure&quot;, true, { cfgtitle, cfgScript, cfgBody, cfgData, cfgBody2 })</div><div class="ttdoc">Crowdsensor main page cfgSensorPageAux based on different AutoConnect Elements.</div></div>
<div class="ttc" id="main_8h_html_ae04c5f63255c64419b7eae91e1c379fe"><div class="ttname"><a href="main_8h.html#ae04c5f63255c64419b7eae91e1c379fe">wifi_found</a></div><div class="ttdeci">#define wifi_found</div><div class="ttdoc">state machine WiFi found state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00705">main.h:705</a></div></div>
<div class="ttc" id="main_8h_html_a540a3a340d0772e9a18888d64f7573f9"><div class="ttname"><a href="main_8h.html#a540a3a340d0772e9a18888d64f7573f9">timeOfMeasure</a></div><div class="ttdeci">String timeOfMeasure</div><div class="ttdoc">the time of the measurement of the first observation</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01171">main.h:1171</a></div></div>
<div class="ttc" id="main_8h_html_ad9a078f7f5a00549c6d662079e98f9af"><div class="ttname"><a href="main_8h.html#ad9a078f7f5a00549c6d662079e98f9af">bmeAddress</a></div><div class="ttdeci">unsigned char bmeAddress</div><div class="ttdoc">Add of the BME280 I2C, dynamic fetched from BME_ADR.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01179">main.h:1179</a></div></div>
<div class="ttc" id="create__json_8h_html_a228d39e3bffd6da29f60c52ecbdd3e8e"><div class="ttname"><a href="create__json_8h.html#a228d39e3bffd6da29f60c52ecbdd3e8e">json_madavi</a></div><div class="ttdeci">String json_madavi(bool status_sds, float pm10, float pm25, float temp, float hum, float atm)</div><div class="ttdoc">create a json string</div><div class="ttdef"><b>Definition:</b> <a href="create__json_8h_source.html#l00032">create_json.h:32</a></div></div>
<div class="ttc" id="main_8h_html_a7b1a43814b8c79bf694be69883c2461a"><div class="ttname"><a href="main_8h.html#a7b1a43814b8c79bf694be69883c2461a">gHttpCode</a></div><div class="ttdeci">int gHttpCode</div><div class="ttdoc">HTTP Client Response Global.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01243">main.h:1243</a></div></div>
<div class="ttc" id="main_8h_html_ac34c6d6c5015a01d6aba05368fd9fdb7"><div class="ttname"><a href="main_8h.html#ac34c6d6c5015a01d6aba05368fd9fdb7">license_type</a></div><div class="ttdeci">String license_type</div><div class="ttdoc">Possible additional sensors other than SDS011.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01219">main.h:1219</a></div></div>
<div class="ttc" id="main_8h_html_a5e9ff2a0401c64386c0b7277b07063cf"><div class="ttname"><a href="main_8h.html#a5e9ff2a0401c64386c0b7277b07063cf">MY_DBG</a></div><div class="ttdeci">#define MY_DBG(...)</div><div class="ttdoc">Define MY_DEB() for controlling serial.print debugging.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00616">main.h:616</a></div></div>
<div class="ttc" id="main_8h_html_a920c4e3276045ca1dff00e3bc50a6068"><div class="ttname"><a href="main_8h.html#a920c4e3276045ca1dff00e3bc50a6068">Portal</a></div><div class="ttdeci">myAutoConnect Portal(Server)</div><div class="ttdoc">initialise AutoConnect</div></div>
<div class="ttc" id="main_8h_html_abdc4960daecc2ccc289d9a50f11ccb47"><div class="ttname"><a href="main_8h.html#abdc4960daecc2ccc289d9a50f11ccb47">abovennEstimated</a></div><div class="ttdeci">float abovennEstimated</div><div class="ttdoc">Location Estimated abovenn Point.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01209">main.h:1209</a></div></div>
<div class="ttc" id="main_8h_html_ad9e643bc6bd5a62b9b5011cf1c93629e"><div class="ttname"><a href="main_8h.html#ad9e643bc6bd5a62b9b5011cf1c93629e">latitude</a></div><div class="ttdeci">float latitude</div><div class="ttdoc">Location Latitude Point.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01203">main.h:1203</a></div></div>
<div class="ttc" id="main_8h_html_a45d12cf9a1aad6de4fc0f7b51d3c2a47"><div class="ttname"><a href="main_8h.html#a45d12cf9a1aad6de4fc0f7b51d3c2a47">http_error</a></div><div class="ttdeci">boolean http_error</div><div class="ttdoc">set display contrast</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01199">main.h:1199</a></div></div>
<div class="ttc" id="main_8h_html_a9a521613f1275c9f7d53f59d48ea1a3a"><div class="ttname"><a href="main_8h.html#a9a521613f1275c9f7d53f59d48ea1a3a">getIsoTime</a></div><div class="ttdeci">String getIsoTime()</div><div class="ttdoc">Get Standard time.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01572">main.h:1572</a></div></div>
<div class="ttc" id="main_8h_html_a60fdfcce32e4426394298ad5ae821505"><div class="ttname"><a href="main_8h.html#a60fdfcce32e4426394298ad5ae821505">init_state</a></div><div class="ttdeci">#define init_state</div><div class="ttdoc">state machine initial state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00699">main.h:699</a></div></div>
<div class="ttc" id="main_8h_html_aefbae19fa2c1e99c02689d2af5a578ad"><div class="ttname"><a href="main_8h.html#aefbae19fa2c1e99c02689d2af5a578ad">handle_client</a></div><div class="ttdeci">#define handle_client</div><div class="ttdoc">state machine handle client state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00733">main.h:733</a></div></div>
<div class="ttc" id="esp32-stationary_8ino_html_a4fc01d736fe50cf5b977f755b675f11d"><div class="ttname"><a href="esp32-stationary_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a></div><div class="ttdeci">void setup()</div><div class="ttdoc">initialization of peripherals attached to ESP32 board</div><div class="ttdef"><b>Definition:</b> <a href="esp32-stationary_8ino_source.html#l00023">esp32-stationary.ino:23</a></div></div>
<div class="ttc" id="main_8h_html_a6b8024ee3deccc9201e4151ec55efefb"><div class="ttname"><a href="main_8h.html#a6b8024ee3deccc9201e4151ec55efefb">getChipId</a></div><div class="ttdeci">String getChipId()</div><div class="ttdoc">get chip id from MAC only 3-bytes</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01582">main.h:1582</a></div></div>
<div class="ttc" id="main_8h_html_a169ccab923f5b63fc64a62bc86e1f3d0"><div class="ttname"><a href="main_8h.html#a169ccab923f5b63fc64a62bc86e1f3d0">dsHmBme</a></div><div class="ttdeci">#define dsHmBme</div><div class="ttdoc">Post Observation Selector for BME280 Humidity.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00687">main.h:687</a></div></div>
<div class="ttc" id="main_8h_html_a11ebff5e32b5f74e552c32f4d9fb0b15"><div class="ttname"><a href="main_8h.html#a11ebff5e32b5f74e552c32f4d9fb0b15">start_measurement_bme</a></div><div class="ttdeci">#define start_measurement_bme</div><div class="ttdoc">state machine check sensor selection state</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00709">main.h:709</a></div></div>
<div class="ttc" id="main_8h_html_a6f56f37a7d93ec2851a5d9bc46ae4d34"><div class="ttname"><a href="main_8h.html#a6f56f37a7d93ec2851a5d9bc46ae4d34">device_Serial</a></div><div class="ttdeci">String device_Serial</div><div class="ttdoc">Chip ID for the ESp32.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01225">main.h:1225</a></div></div>
<div class="ttc" id="main_8h_html_ac5d957e4fd3dc11cd97a54cf9ca057a4"><div class="ttname"><a href="main_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a></div><div class="ttdeci">#define RST</div><div class="ttdoc">Reset PIN of OLED Module.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l00673">main.h:673</a></div></div>
<div class="ttc" id="main_8h_html_aca788da1bb94e00641b6b0c009cbe0cf"><div class="ttname"><a href="main_8h.html#aca788da1bb94e00641b6b0c009cbe0cf">nObservations</a></div><div class="ttdeci">unsigned int nObservations</div><div class="ttdoc">total number of observations not posted successfully</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01167">main.h:1167</a></div></div>
<div class="ttc" id="display_8h_html_a7dbca79a8947bbade5fff48395c91940"><div class="ttname"><a href="display_8h.html#a7dbca79a8947bbade5fff48395c91940">teco</a></div><div class="ttdeci">const uint8_t PROGMEM teco[]</div><div class="ttdoc">TECO Icon bits of size 64x128.</div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00024">display.h:24</a></div></div>
<div class="ttc" id="main_8h_html_a43675163416d0468e787ae5e78101d8c"><div class="ttname"><a href="main_8h.html#a43675163416d0468e787ae5e78101d8c">initialised_http</a></div><div class="ttdeci">bool initialised_http</div><div class="ttdoc">if HTTP Server manager is initialized</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01159">main.h:1159</a></div></div>
<div class="ttc" id="main_8h_html_a0d3038c949b3590fa1cba35f487583b8"><div class="ttname"><a href="main_8h.html#a0d3038c949b3590fa1cba35f487583b8">gHttp</a></div><div class="ttdeci">HTTPClient gHttp</div><div class="ttdoc">HTTP Client Variable Global.</div><div class="ttdef"><b>Definition:</b> <a href="main_8h_source.html#l01241">main.h:1241</a></div></div>
<div class="ttc" id="nvs__storage_8h_html_acea24fbda5227d3c2c200578d4ea739c"><div class="ttname"><a href="nvs__storage_8h.html#acea24fbda5227d3c2c200578d4ea739c">get_integer</a></div><div class="ttdeci">unsigned int get_integer(const char used_namespace[14], const char key_nvs[14])</div><div class="ttdoc">retrieve given int value of a key in a namespace</div><div class="ttdef"><b>Definition:</b> <a href="nvs__storage_8h_source.html#l00102">nvs_storage.h:102</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f119f3591e19b4a421731e2b672ab819.html">esp32-stationary</a></li><li class="navelem"><a class="el" href="esp32-stationary_8ino.html">esp32-stationary.ino</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
